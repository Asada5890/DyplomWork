<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ category }} - Категория товаров</title>
</head>
<style>
    /* Базовые стили */
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'Arial', sans-serif;
    }

    body {
        background: #f8f9fa;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    /* Шапка */
    header {
        background: #2c3e50;
        padding: 1rem 2rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
    }

    .logo {
        color: white;
        font-size: 1.8rem;
        font-weight: bold;
        text-decoration: none;
    }

    .nav-menu {
        display: flex;
        gap: 2rem;
        position: relative;
    }

    .nav-link {
        color: #ecf0f1;
        text-decoration: none;
        transition: color 0.3s;
    }

    .nav-link:hover {
        color: #3498db;
    }

    .nav-item {
position: relative;
}

.dropdown-menu {
position: absolute;
top: 100%;
left: 0;
background: white;
min-width: 200px;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
display: flex; /* всегда в DOM, но "невидим" */
flex-direction: column;
z-index: 999;
border-radius: 8px;
overflow: hidden;

opacity: 0;
visibility: hidden;
transform: translateY(10px);
pointer-events: none;

transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
}

.dropdown-link {
padding: 0.8rem 1rem;
text-decoration: none;
color: #2c3e50;
transition: background 0.3s;
}

.dropdown-link:hover {
background: #f0f0f0;
}

.nav-item:hover .dropdown-menu {
opacity: 1;
visibility: visible;
transform: translateY(0);
pointer-events: auto;
}


    /* Основной контент */
    main {
        flex: 1;
        padding: 2rem;
        max-width: 1200px;
        margin: 0 auto;
        width: 100%;
    }

    .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        padding: 2rem 0;
    }

    /* Карточка товара */
    .product-card {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        transition: transform 0.3s, box-shadow 0.3s;
        cursor: pointer;
    }

    .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }

    .product-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-bottom: 3px solid #3498db;
    }

    .product-info {
        padding: 1.5rem;
    }

    .product-title {
        font-size: 1.2rem;
        color: #2c3e50;
        margin-bottom: 0.8rem;
    }

    .product-price {
        color: #27ae60;
        font-size: 1.4rem;
        font-weight: bold;
        margin-bottom: 1rem;
    }

    .cart-btn {
        background: #3498db;
        color: white;
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 25px;
        cursor: pointer;
        transition: background 0.3s;
    }

    .cart-btn.added {
        background: #7f8c8d;
        cursor: default;
    }

    /* Футер */
    footer {
        background: #2c3e50;
        color: white;
        padding: 2rem;
        margin-top: auto;
    }

    .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
    }

    .footer-section h3 {
        margin-bottom: 1rem;
        color: #3498db;
    }

    /* Баннер */
    .banner {
        background: #3498db;
        color: white;
        padding: 3rem 2rem;
        text-align: center;
        margin-bottom: 2rem;
        border-radius: 12px;
    }

    .banner h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    @media (max-width: 768px) {
        .nav-container {
            flex-direction: column;
            gap: 1rem;
        }

        .product-card {
            width: 100%;
        }

        .dropdown-menu {
            position: static;
            box-shadow: none;
            border-radius: 0;
            display: none;
        }

        .nav-item:hover .dropdown-menu {
            display: block;
        }
    }

    .product-info a {
        all:unset;
    }
</style>
<header>
    <nav class="nav-container">
        <a href="/" class="logo">СтройМаркет</a>
        <div class="nav-menu">
            <div class="nav-item">
                <a href="#" class="nav-link">Каталог</a>
                <div class="dropdown-menu">
                    {% for category in categories %}
                    <a href="/products/category/{{ category }}" class="dropdown-link">{{ category }}</a>
                    {% endfor %}
                </div>
            </div>
            <a href="#" class="nav-link">Акции</a>
            <a href="#" class="nav-link">Доставка</a>
            <a href="#" class="nav-link">Контакты</a>
        </div>
    </nav>
</header>
<body>
    <h1>Товары в категории: {{ category }}</h1>
    <div class="products-grid">
        {% for product in products %}
        <div class="product-card">
            <div class="product-image-container">
                {% if product.images and product.images[0] %}
                    <img src="{{ product.images[0] }}" alt="{{ product.name }}" class="product-image">
                {% else %}
                    <div class="product-image" style="background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
                        <span>Нет изображения</span>
                    </div>
                {% endif %}
            </div>
            <div class="product-info" href="/">
                <a href="/product/{{ product._id }}">
                <h3 class="product-title">{{ product.name }}</h3>
                <p class="product-price">{{ product.price }} ₽</p>
                <form action="/add_to_cart" method="POST">
                    <input type="hidden" name="product_id" value="{{ product._id }}">
                </a>
                    <button type="submit" class="cart-btn">
                        <i class="fas fa-cart-plus"></i>
                        В корзину
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
</body>
</html>
